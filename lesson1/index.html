<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class='wrapper'>
        <button class='like-btn'>
            <span class='like-text'>ç‚¹èµ</span>
            <span>ğŸ‘</span>
        </button>
    </div>
</body>
<script>
    const button = document.querySelector('.like-btn')
    const buttonText = button.querySelector('.like-text')
    let isLiked = false
    button.addEventListener('click', () => {
        isLiked = !isLiked
        if (isLiked) {
            buttonText.innerHTML = 'å–æ¶ˆ'
        } else {
            buttonText.innerHTML = 'ç‚¹èµ'
        }
    }, false)

    // const wrapper = document.querySelector('.wrapper')
    // const likeButton1 = new LikeButton()
    // wrapper.innerHTML = likeButton1.render()

    // const likeButton2 = new LikeButton()
    // wrapper.innerHTML += likeButton2.render()
    // ::String => ::Document
    const createDOMFromString = (domString) => {
        const div = document.createElement('div')
        div.innerHTML = domString
        return div
    }

    //å¯å¤ç”¨çš„å†™æ³•
    class LikeButton {
        constructor() {
            this.state = { isLiked: false }
        }

        setState(state) {
            const oldEl = this.el
            this.state = state
            this.el = this.render()
            if (this.onStateChange) {
                this.onStateChange(oldEl, this.el)
            }
        }

        changeLikeText() {
            this.setState({
                isLiked: !this.state.isLiked
            })
        }

        render() {
            //es6ä¸­æ–°å¢å­—ç¬¦ä¸²æ¨¡æ¿ä¸­ä½¿ç”¨${}åŒ…è£¹ä¸€ä¸ªå˜é‡æˆ–è¡¨è¾¾å¼
            this.el = createDOMFromString(`
                <button class='like-btn'>
                <span class='like-text'>${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}</span>
                <span>ğŸ‘</span>
                </button>
            `)
            this.el.addEventListener('click', this.changeLikeText.bind(this), false)
            return this.el
        }
    }

    const wrapper = document.querySelector('.wrapper')

    const likeButton = new LikeButton()
    wrapper.appendChild(likeButton.render())
    likeButton.onStateChange = (oldEl, newEl) => {
        // insertBefore() æ–¹æ³•å¯åœ¨å·²æœ‰çš„å­èŠ‚ç‚¹å‰æ’å…¥ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹
        wrapper.insertBefore(newEl, oldEl) // æ’å…¥æ–°çš„å…ƒç´ 
        wrapper.removeChild(oldEl) // åˆ é™¤æ—§çš„å…ƒç´ 
    }
    const likeButton2 = new LikeButton()
    wrapper.appendChild(likeButton2.render())
    likeButton2.onStateChange = (oldEl, newEl) => {
        // insertBefore() æ–¹æ³•å¯åœ¨å·²æœ‰çš„å­èŠ‚ç‚¹å‰æ’å…¥ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹
        wrapper.insertBefore(newEl, oldEl) // æ’å…¥æ–°çš„å…ƒç´ 
        wrapper.removeChild(oldEl) // åˆ é™¤æ—§çš„å…ƒç´ 
    }




</script>

</html>